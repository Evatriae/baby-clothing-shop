<ion-header>
  <ion-toolbar>
    <ion-buttons slot="end">
      <ion-button slot="icon-only" (click)="toggleAccordion()" class="menu-button">
        <ion-icon name="menu-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-grid style="height: 100%;">
      <ion-row style="align-items: center;">
        <ion-col class="header-col">
          <img src="assets/baby-clothes-icon-isolated-on-white-background-vector.png" alt="main icon" class="menu-button" routerLink="/landing" />
        </ion-col>
        <ion-col size="auto" class="header-col">
          <div class="icon-with-badge">
            <ion-button fill="clear" class="menu-button">
              <ion-icon name="basket-outline"></ion-icon>
            </ion-button>
            <ion-badge color="danger" class="cart-badge" *ngIf="cartItemCount > 0">{{ cartItemCount }}</ion-badge>
          </div>
        </ion-col>
        <ion-col size="auto" class="header-col">
          <ion-button fill="clear" class="menu-button" routerLink="/login">
            <ion-icon name="person-circle-outline"></ion-icon>
          </ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-toolbar>
</ion-header>

<!-- Overlay dropdown menu and backdrop -->
<div *ngIf="showAccordion">
  <div class="dropdown-backdrop" (click)="toggleAccordion()"></div>
  <div class="menu-dropdown-overlay">
    <ion-list>
      <ion-item button routerLink="/home">Home</ion-item>
      <ion-item button routerLink="/shop">Shop</ion-item>
      <ion-item button routerLink="/contact">Contact Us</ion-item>
      <ion-item button routerLink="/about">About Us</ion-item>
    </ion-list>
  </div>
</div>

<ion-content>
  <div class="page-wrapper">
    <div class="main-content ion-padding">
      
      <!-- Shop Content -->
      <div class="shop-container">
        <h1 class="page-title">Shop</h1>
        <div class="shop-content">
          <p>Browse our collection of adorable baby clothing!</p>
          
          <!-- Categories Section -->
          <div class="categories-section" *ngFor="let category of categories">
            <h2 class="category-title">{{ category.name }}</h2>
            
            <!-- Horizontal Scrolling Products -->
            <div class="products-scroll-container">
              <div class="products-horizontal-scroll">
                <div class="product-item" *ngFor="let product of category.products">
                  <ion-card class="product-card" (click)="openProductModal(product)">
                    <div class="product-image-container">
                      <img [src]="product.image" [alt]="product.name" class="product-image" />
                    </div>
                    <ion-card-content class="product-content">
                      <h3 class="product-name">{{ product.name }}</h3>
                      <p class="product-price">{{ product.price }}</p>
                      <ion-button 
                        fill="solid" 
                        size="small" 
                        class="add-to-cart-btn"
                        (click)="addToCart(product); $event.stopPropagation()">
                        Add to Cart
                      </ion-button>
                    </ion-card-content>
                  </ion-card>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>

    <!-- Product Details Modal -->
    <div class="product-modal-overlay" *ngIf="showProductModal" (click)="closeProductModal()">
      <div class="product-modal" (click)="$event.stopPropagation()" *ngIf="selectedProduct">
        <div class="modal-header">
          <ion-button fill="clear" class="close-button" (click)="closeProductModal()">
            <ion-icon name="close-outline"></ion-icon>
          </ion-button>
        </div>
        
        <div class="modal-content">
          <div class="modal-image-section">
            <img [src]="selectedProduct.image" [alt]="selectedProduct.name" class="modal-product-image" />
          </div>
          
          <div class="modal-details-section">
            <h2 class="modal-product-name">{{ selectedProduct.name }}</h2>
            <p class="modal-product-price">{{ selectedProduct.price }}</p>
            
            <div class="product-description">
              <h3>Description</h3>
              <p>{{ selectedProduct.description }}</p>
            </div>
            
            <div class="product-options">
              <div class="size-selection">
                <h4>Available Sizes</h4>
                <div class="size-buttons">
                  <ion-button 
                    fill="outline" 
                    size="small" 
                    class="size-btn"
                    *ngFor="let size of selectedProduct.sizes">
                    {{ size }}
                  </ion-button>
                </div>
              </div>
              
              <div class="color-selection">
                <h4>Available Colors</h4>
                <div class="color-options">
                  <span class="color-option" *ngFor="let color of selectedProduct.colors">
                    {{ color }}
                  </span>
                </div>
              </div>
            </div>
            
            <div class="modal-actions">
              <ion-button 
                fill="solid" 
                class="modal-add-to-cart-btn"
                (click)="addToCart(selectedProduct)">
                Add to Cart - {{ selectedProduct.price }}
              </ion-button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer class="main-footer">
      <div class="footer-content">
        <img src="assets/baby-clothes-icon-isolated-on-white-background-vector.png" alt="main icon" class="footer-icon" />
        <div class="footer-info">
          <div class="footer-label">Information</div>
          <a routerLink="/about" class="footer-link">About Us</a>
          <a routerLink="/contact" class="footer-link">Contact Us</a>
        </div>
      </div>
    </footer>
  </div>
</ion-content>
