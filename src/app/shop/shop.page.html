<app-toolbar 
  [showAccordion]="showAccordion"
  currentPage="shop"
  (toggleAccordion)="onToggleAccordion()" 
  (profileClick)="onProfileClick()">
</app-toolbar>

<ion-content>
  <ion-refresher slot="fixed" (ionRefresh)="onRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <div class="page-wrapper">
    <div class="main-content ion-padding">
      
      <!-- Shop Content -->
      <div class="shop-container">
        <h1 class="page-title">Shop</h1>
        <div class="shop-content">
          <p>Browse our collection of adorable baby clothing!</p>
          
          <!-- Loading State -->
          <div *ngIf="loading" class="loading-container">
            <ion-spinner></ion-spinner>
            <p>Loading products...</p>
          </div>
          
          <!-- Error State -->
          <div *ngIf="error && !loading" class="error-container">
            <ion-icon name="alert-circle-outline"></ion-icon>
            <p>Error loading products. Please try again.</p>
            <ion-button fill="outline" (click)="loadCategories()">
              Retry
            </ion-button>
          </div>
          
          <!-- Categories Section -->
          <div *ngIf="!loading && !error">
            <div class="categories-section" *ngFor="let category of categories">
            <h2 class="category-title">{{ category.name }}</h2>
            
            <!-- Horizontal Scrolling Products -->
            <div class="products-scroll-container">
              <div class="products-horizontal-scroll">
                <div class="product-item" *ngFor="let product of category.products">
                  <ion-card class="product-card" (click)="openProductModal(product)">
                    <div class="product-image-container">
                      <img [src]="product.image" [alt]="product.name" class="product-image" />
                    </div>
                    <ion-card-content class="product-content">
                      <h3 class="product-name">{{ product.name }}</h3>
                      <p class="product-price">${{ product.price.toFixed(2) }}</p>
                      <ion-button 
                        fill="solid" 
                        size="small" 
                        class="add-to-cart-btn"
                        (click)="addToCart(product); $event.stopPropagation()">
                        Add to Cart
                      </ion-button>
                    </ion-card-content>
                  </ion-card>
                </div>
              </div>
            </div>
            </div>
          </div>
        </div>
      </div>

    </div>

    <!-- Product Details Modal -->
    <app-product-modal 
      [product]="selectedProduct"
      [isOpen]="showProductModal"
      (dismiss)="closeProductModal()">
    </app-product-modal>

    <footer class="main-footer">
      <div class="footer-content">
        <img src="assets/baby-clothes-icon-isolated-on-white-background-vector.png" alt="main icon" class="footer-icon" />
        <div class="footer-info">
          <div class="footer-label">Information</div>
          <a routerLink="/about" class="footer-link">About Us</a>
          <a routerLink="/contact" class="footer-link">Contact Us</a>
        </div>
      </div>
    </footer>
  </div>
</ion-content>
